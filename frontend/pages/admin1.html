<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - SaiKrupa Paithani</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#800000",
              primaryLight: "#b30000",
              gold: "#D4AF37",
              lightGold: "#F2E8C9",
              cream: "#F8F4E3",
              darkRed: "#680000",
              gray: "#777",
              lightGray: "#f5f5f5",
              white: "#ffffff",
              black: "#333333",
              adminSidebar: "#1f2937",
              adminHeader: "#374151",
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      }
      .sidebar {
        transition: all 0.3s ease;
        background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
      }
      .sidebar-item {
        transition: all 0.3s ease;
        border-radius: 12px;
        margin: 4px 0;
      }
      .sidebar-item:hover {
        background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
        transform: translateX(4px);
      }
      .sidebar-item.active {
        background: linear-gradient(135deg, #800000 0%, #b30000 100%);
        box-shadow: 0 4px 15px rgba(128, 0, 0, 0.3);
      }
      .main-content {
        transition: all 0.3s ease;
      }
      .stat-card {
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        border: 1px solid #e2e8f0;
        border-radius: 16px;
        overflow: hidden;
      }
      .stat-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #800000, #b30000);
      }
      .product-image {
        transition: all 0.3s ease;
        border-radius: 12px;
      }
      .product-image:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }
      .chart-container {
        background: linear-gradient(135deg, #ffffff 0%, #f8f4e3 100%);
        border-radius: 16px;
        border: 1px solid #e2e8f0;
      }
      .modal {
        transition: all 0.3s ease;
        backdrop-filter: blur(8px);
      }
      .modal-content {
        transition: all 0.3s ease;
        border-radius: 20px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      }
      .quick-action-btn {
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        border: 1px solid #e2e8f0;
        border-radius: 16px;
      }
      .quick-action-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(128, 0, 0, 0.15);
        border-color: #800000;
      }
      .table-row {
        transition: all 0.2s ease;
        border-radius: 12px;
      }
      .table-row:hover {
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        transform: scale(1.01);
      }
      .stock-low {
        background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        color: #dc2626;
      }
      .stock-medium {
        background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        color: #d97706;
      }
      .stock-high {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        color: #16a34a;
      }
      .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
    </style>
  </head>
  <body class="bg-gray-50">

    <div class="flex h-screen">
    
      <div class="sidebar w-64 bg-adminSidebar text-white flex flex-col">
     
        <div class="p-6 border-b border-gray-700 glass-effect">
          <div class="flex items-center">
            <div
              class="w-12 h-12 bg-gradient-to-br from-primary to-primaryLight rounded-2xl flex items-center justify-center text-white mr-3 shadow-lg"
            >
              <i class="fas fa-crown text-lg"></i>
            </div>
            <div>
              <h1 class="text-xl font-bold bg-gradient-to-r from-white to-lightGold bg-clip-text text-transparent">SaiKrupa</h1>
              <p class="text-xs text-gray-300">Admin Panel</p>
            </div>
          </div>
        </div>

        <div class="flex-1 overflow-y-auto py-4">
          <nav class="px-4">
            <ul class="space-y-1">
              <li>
                <a
                  href="#"
                  class="sidebar-item active flex items-center p-4 rounded-lg"
                  data-section="dashboard"
                >
                  <div class="w-8 h-8 flex items-center justify-center mr-3 glass-effect rounded-lg">
                    <i class="fas fa-tachometer-alt text-sm"></i>
                  </div>
                  <span class="font-medium">Dashboard</span>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-item flex items-center p-4 rounded-lg"
                  data-section="products"
                >
                  <div class="w-8 h-8 flex items-center justify-center mr-3 glass-effect rounded-lg">
                    <i class="fas fa-tshirt text-sm"></i>
                  </div>
                  <span class="font-medium">Products</span>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-item flex items-center p-4 rounded-lg"
                  onclick="window.location.href='orders.html'"
                >
                  <div class="w-8 h-8 flex items-center justify-center mr-3 glass-effect rounded-lg">
                    <i class="fas fa-shopping-cart text-sm"></i>
                  </div>
                  <span class="font-medium">Orders</span>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-item flex items-center p-4 rounded-lg"
                  onclick="window.location.href='reviews.html'"
                >
                  <div class="w-8 h-8 flex items-center justify-center mr-3 glass-effect rounded-lg">
                    <i class="fas fa-star text-sm"></i>
                  </div>
                  <span class="font-medium">Reviews</span>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-item flex items-center p-4 rounded-lg"
                  onclick="window.location.href='youtube-admin.html'"
                >
                  <div class="w-8 h-8 flex items-center justify-center mr-3 glass-effect rounded-lg">
                    <i class="fab fa-youtube text-sm"></i>
                  </div>
                  <span class="font-medium">YouTube Videos</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <div class="p-4 border-t border-gray-700 glass-effect">
          <div class="flex items-center">
            <img
              src="https://ui-avatars.com/api/?name=Admin+User&background=800000&color=fff&size=128&font-size=0.5&bold=true"
              alt="Admin"
              class="w-10 h-10 rounded-xl border-2 border-primaryLight"
            />
            <div class="ml-3">
              <p class="text-sm font-semibold">Admin User</p>
              <p class="text-xs text-gray-300">Super Admin</p>
            </div>
          </div>
        </div>
      </div>

      <div class="main-content flex-1 flex flex-col overflow-hidden">
        <header class="bg-white shadow-sm border-b border-gray-200">
          <div class="flex items-center justify-between p-4">
            <div class="flex items-center">
              <button
                id="sidebarToggle"
                class="p-3 rounded-xl hover:bg-gray-100 mr-4 lg:hidden transition-all duration-300"
              >
                <i class="fas fa-bars text-gray-600 text-lg"></i>
              </button>
              <h2 class="text-2xl font-bold text-gray-800" id="pageTitle">
                Dashboard Overview
              </h2>
            </div>

            <div class="flex items-center space-x-4">
              <div class="relative">
                <button
                  class="p-3 rounded-xl hover:bg-gray-100 transition-all duration-300"
                  id="notificationsBtn"
                >
                  <i class="fas fa-bell text-gray-600 text-lg"></i>
                  <span
                    class="absolute top-0 right-0 bg-gradient-to-r from-primary to-primaryLight text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-semibold shadow-lg"
                    >3</span
                  >
                </button>
              </div>
              <div class="relative">
                <input
                  type="text"
                  placeholder="Search..."
                  class="pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-80 bg-gray-50 transition-all duration-300"
                />
                <i
                  class="fas fa-search absolute left-4 top-3.5 text-gray-400 text-lg"
                ></i>
              </div>
            </div>
          </div>
        </header>

        <div class="flex-1 overflow-y-auto p-6 bg-gradient-to-br from-gray-50 to-gray-100">
          <section id="dashboard" class="section active">
            <div class="mb-8">
              <h1 class="text-3xl font-bold text-gray-800 mb-2">
                Welcome back, Admin! üëã
              </h1>
              <p class="text-gray-600 text-lg">
                Here's what's happening with your store today.
              </p>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
              <a
                href="#"
                class="quick-action-btn p-6 text-center group"
                data-section="products"
              >
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary/10 to-primaryLight/10 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:from-primary/20 group-hover:to-primaryLight/20 transition-all duration-300"
                >
                  <i class="fas fa-plus text-primary text-2xl"></i>
                </div>
                <h3 class="font-semibold text-gray-800 text-lg mb-2">Add New Product</h3>
                <p class="text-sm text-gray-600">Add new Paithani saree to collection</p>
              </a>

              <a
                href="#"
                class="quick-action-btn p-6 text-center group"
                data-section="products"
              >
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary/10 to-primaryLight/10 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:from-primary/20 group-hover:to-primaryLight/20 transition-all duration-300"
                >
                  <i class="fas fa-tshirt text-primary text-2xl"></i>
                </div>
                <h3 class="font-semibold text-gray-800 text-lg mb-2">View All Products</h3>
                <p class="text-sm text-gray-600">Manage your saree collection</p>
              </a>

              <a
                href="#"
                class="quick-action-btn p-6 text-center group"
                onclick="window.location.href='orders.html'"
              >
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary/10 to-primaryLight/10 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:from-primary/20 group-hover:to-primaryLight/20 transition-all duration-300"
                >
                  <i class="fas fa-shopping-cart text-primary text-2xl"></i>
                </div>
                <h3 class="font-semibold text-gray-800 text-lg mb-2">View Orders</h3>
                <p class="text-sm text-gray-600">Process customer orders</p>
              </a>

              <a
                href="#"
                class="quick-action-btn p-6 text-center group"
                data-section="users"
              >
                <div
                  class="w-16 h-16 bg-gradient-to-br from-primary/10 to-primaryLight/10 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:from-primary/20 group-hover:to-primaryLight/20 transition-all duration-300"
                >
                  <i class="fas fa-users text-primary text-2xl"></i>
                </div>
                <h3 class="font-semibold text-gray-800 text-lg mb-2">Manage Users</h3>
                <p class="text-sm text-gray-600">View all customers</p>
              </a>
            </div>

            <!-- Charts and Recent Activity -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
              <!-- Sales Chart -->
              <div class="chart-container p-6">
                <div class="flex justify-between items-center mb-6">
                  <h3 class="text-xl font-semibold text-gray-800">
                    Sales Overview
                  </h3>
                  <div class="flex space-x-2">
                    <button class="px-3 py-1 text-xs bg-primary text-white rounded-lg">Month</button>
                    <button class="px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded-lg">Quarter</button>
                    <button class="px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded-lg">Year</button>
                  </div>
                </div>
                <div class="h-64 rounded-lg">
                  <canvas id="salesChart"></canvas>
                </div>
              </div>

              <!-- Recent Orders -->
              <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200">
                <div class="flex justify-between items-center mb-6">
                  <h3 class="text-xl font-semibold text-gray-800">
                    Recent Orders
                  </h3>
                  <a
                    href="orders.html"
                    class="text-primary text-sm font-semibold flex items-center hover:text-primaryLight transition-colors"
                  >
                    View All
                    <i class="fas fa-arrow-right ml-1 text-xs"></i>
                  </a>
                </div>
                <div class="space-y-4" id="recentOrdersList">
                  <!-- Recent orders will be populated here -->
                </div>
              </div>
            </div>

            <!-- Activity Log -->
            <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-gray-800">
                  Recent Activity
                </h3>
                <a href="#" class="text-primary text-sm font-semibold flex items-center hover:text-primaryLight transition-colors">
                  View All
                  <i class="fas fa-arrow-right ml-1 text-xs"></i>
                </a>
              </div>
              <div class="space-y-4" id="activityLog">
                <!-- Activity items will be populated here -->
              </div>
            </div>
          </section>

          <!-- Products Section -->
          <section id="products" class="section hidden">
            <div class="mb-8 flex justify-between items-center">
              <div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">
                  Product Management
                </h1>
                <p class="text-gray-600 text-lg">
                  Manage your Paithani saree collection
                </p>
              </div>
              <button
                class="bg-gradient-to-r from-primary to-primaryLight hover:from-primaryLight hover:to-primary text-white px-6 py-3 rounded-xl font-semibold flex items-center shadow-lg hover:shadow-xl transition-all duration-300"
                id="addProductBtn"
              >
                <i class="fas fa-plus mr-2"></i> Add New Product
              </button>
            </div>

            <!-- Products Table -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-200">
              <div class="p-6 border-b border-gray-200">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0">
                  <div class="flex flex-wrap gap-2">
                    <button class="px-4 py-2 bg-primary text-white rounded-xl text-sm font-semibold shadow-md" id="filterAll">
                      All Products
                    </button>
                    <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-colors" id="filterInStock">
                      In Stock
                    </button>
                    <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-colors" id="filterLowStock">
                      Low Stock
                    </button>
                    <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 transition-colors" id="filterOutOfStock">
                      Out of Stock
                    </button>
                  </div>
                  <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
                    <select class="border border-gray-300 rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full lg:w-auto" id="categoryFilter">
                      <option value="">All Categories</option>
                      <option>Pure Paithani</option>
                      <option>Semi Paithani</option>
                      <option>Kadiyal Paithani</option>
                      <option>Narayan Peth</option>
                      <option>Sico Paithani</option>
                    </select>
                    <div class="relative w-full lg:w-64">
                      <input
                        type="text"
                        placeholder="Search products..."
                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm w-full"
                        id="searchInput"
                      />
                      <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                  </div>
                </div>
              </div>

              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Product
                      </th>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Category
                      </th>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Price
                      </th>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Stock
                      </th>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Status
                      </th>
                      <th class="px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">
                        Actions
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200" id="productsTableBody">
                    <!-- Product rows will be populated here -->
                  </tbody>
                </table>
              </div>

              <div class="px-6 py-4 border-t border-gray-200 bg-gray-50">
                <div class="flex flex-col md:flex-row items-center justify-between">
                  <div class="text-sm text-gray-700 mb-2 md:mb-0">
                    Showing
                    <span class="font-semibold" id="productsStart">1</span> to
                    <span class="font-semibold" id="productsEnd">10</span> of
                    <span class="font-semibold" id="productsTotal">0</span>
                    results
                  </div>
                  <div class="flex space-x-2" id="paginationContainer">
                    <!-- Pagination will be added dynamically -->
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Add Product Modal -->
    <div
      id="addProductModal"
      class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4"
    >
      <div
        class="modal-content bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"
      >
        <div class="p-6 border-b border-gray-200">
          <h3 class="text-2xl font-bold text-gray-800">Add New Product</h3>
          <p class="text-gray-600 mt-1">Add a new Paithani saree to your collection</p>
        </div>
        <div class="p-6">
          <form
            class="space-y-6"
            id="productForm"
            enctype="multipart/form-data"
          >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2"
                  >Product Name *</label
                >
                <input
                  type="text"
                  name="name"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
                  placeholder="Enter product name"
                  required
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2"
                  >Category *</label
                >
                <select
                  name="category"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
                  required
                >
                  <option value="">Select Category</option>
                  <option>Pure Paithani</option>
                  <option>Semi Paithani</option>
                  <option>Kadiyal Paithani</option>
                  <option>Narayan Peth</option>
                  <option>Sico Paithani</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2"
                  >Price (‚Çπ) *</label
                >
                <input
                  type="number"
                  name="price"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
                  placeholder="Enter price"
                  required
                  min="0"
                  step="0.01"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2"
                  >Stock Quantity *</label
                >
                <input
                  type="number"
                  name="stock"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
                  placeholder="Enter stock quantity"
                  required
                  min="0"
                />
              </div>
            </div>

            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2"
                >Description</label
              >
              <textarea
                name="description"
                rows="4"
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
                placeholder="Enter product description"
              ></textarea>
            </div>

            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2"
                >Product Images *</label
              >
              <div
                id="imageDropZone"
                class="border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center cursor-pointer hover:border-primary transition-all duration-300 bg-gray-50 hover:bg-gray-100"
              >
                <i
                  class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"
                ></i>
                <p class="text-lg font-medium text-gray-600 mb-2">
                  Drag & drop images or click to browse
                </p>
                <p class="text-sm text-gray-500">
                  Supports JPG, PNG, WEBP - Max 5MB per image
                </p>
                <input
                  type="file"
                  name="images"
                  id="productImages"
                  class="hidden"
                  multiple
                  accept="image/*"
                  required
                />
              </div>
              <div id="imagePreview" class="flex flex-wrap gap-4 mt-4"></div>
            </div>
          </form>
        </div>

        <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
          <button
            type="button"
            class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300"
            id="cancelProductBtn"
          >
            Cancel
          </button>
          <button
            type="submit"
            form="productForm"
            class="px-6 py-3 bg-gradient-to-r from-primary to-primaryLight text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300"
            id="saveProductBtn"
          >
            <i class="fas fa-plus mr-2"></i> Add Product
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4">
      <div class="modal-content bg-white rounded-2xl shadow-2xl w-full max-w-md">
        <div class="p-6 border-b border-gray-200">
          <h2 class="text-2xl font-bold text-gray-800">Edit Product</h2>
          <p class="text-gray-600 mt-1">Update product details</p>
        </div>
        <div class="p-6">
          <form id="editForm">
            <input type="hidden" id="editProductId">
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Name *</label>
                <input type="text" id="editName" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300" required>
              </div>
              
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Price (‚Çπ) *</label>
                <input type="number" id="editPrice" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300" required min="0" step="0.01">
              </div>
              
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Category *</label>
                <select id="editCategory" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300" required>
                  <option value="">Select Category</option>
                  <option>Pure Paithani</option>
                  <option>Semi Paithani</option>
                  <option>Kadiyal Paithani</option>
                  <option>Narayan Peth</option>
                  <option>Sico Paithani</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Stock *</label>
                <input type="number" id="editStock" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300" required min="0">
              </div>
              
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">Description</label>
                <textarea id="editDescription" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300" rows="3"></textarea>
              </div>
            </div>
          </form>
        </div>
        <div class="p-6 border-t border-gray-200 flex justify-end gap-3">
          <button type="button" id="cancelEdit" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300">Cancel</button>
          <button type="button" id="saveEditBtn" class="px-6 py-3 bg-gradient-to-r from-primary to-primaryLight text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300">Save Changes</button>
        </div>
      </div>
    </div>

   <script>
  // Global variables
  let allProducts = [];
  let currentPage = 1;
  const productsPerPage = 10;
  
  // API Base URL - UPDATED TO RENDER
  const API_BASE_URL = "https://saikrupapaithanisarees-mdqk.onrender.com";
  console.log("üöÄ Admin Dashboard using API:", API_BASE_URL);

  // DOM Elements
  const imageDropZone = document.getElementById("imageDropZone");
  const productImages = document.getElementById("productImages");
  const imagePreview = document.getElementById("imagePreview");
  const productForm = document.getElementById("productForm");

  // Image preview for add product
  imageDropZone.addEventListener("click", () => productImages.click());
  productImages.addEventListener("change", handleImagePreview);

  function handleImagePreview() {
    imagePreview.innerHTML = "";
    Array.from(productImages.files).forEach((file) => {
      const reader = new FileReader();
      reader.onload = (e) => {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.classList.add(
          "w-24",
          "h-24",
          "object-cover",
          "rounded-xl",
          "border-2",
          "border-gray-200",
          "shadow-sm"
        );
        imagePreview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  }

  // Sidebar & dashboard init
  document.addEventListener("DOMContentLoaded", function () {
    console.log("üèÅ Admin Dashboard Initializing...");
    initializeSidebar();
    initializeEventListeners();
    loadDashboard();
  });

  function initializeSidebar() {
    const sidebarToggle = document.getElementById("sidebarToggle");
    const sidebar = document.querySelector(".sidebar");
    const mainContent = document.querySelector(".main-content");

    if (sidebarToggle) {
      sidebarToggle.addEventListener("click", function () {
        sidebar.classList.toggle("hidden");
        mainContent.classList.toggle("lg:ml-0");
      });
    }

    const sidebarItems = document.querySelectorAll(".sidebar-item");
    const sections = document.querySelectorAll(".section");
    const pageTitle = document.getElementById("pageTitle");
    const quickActionBtns = document.querySelectorAll(".quick-action-btn");

    function switchSection(sectionId) {
      sidebarItems.forEach((i) => i.classList.remove("active"));
      const activeItem = document.querySelector(`[data-section="${sectionId}"]`);
      if (activeItem) activeItem.classList.add("active");
      
      sections.forEach((section) => {
        section.classList.add("hidden");
        section.classList.remove("active");
      });
      
      const targetSection = document.getElementById(sectionId);
      if (targetSection) {
        targetSection.classList.remove("hidden");
        targetSection.classList.add("active");
      }

      if (pageTitle && activeItem) {
        const spanElement = activeItem.querySelector('span');
        if (spanElement) {
          pageTitle.textContent = spanElement.textContent;
        }
      }
      
      if (window.innerWidth < 1024) {
        sidebar.classList.add("hidden");
        mainContent.classList.remove("lg:ml-0");
      }
    }

    sidebarItems.forEach((item) => {
      item.addEventListener("click", function (e) {
        e.preventDefault();
        const sectionId = this.getAttribute("data-section");
        switchSection(sectionId);
      });
    });

    quickActionBtns.forEach((btn) => {
      btn.addEventListener("click", function (e) {
        e.preventDefault();
        const sectionId = this.getAttribute("data-section");
        switchSection(sectionId);
      });
    });
  }

  function initializeEventListeners() {
    // Add Product Modal
    const addProductBtn = document.getElementById("addProductBtn");
    const addProductModal = document.getElementById("addProductModal");
    const cancelProductBtn = document.getElementById("cancelProductBtn");

    addProductBtn.addEventListener("click", () => {
      addProductModal.classList.remove("hidden");
    });

    cancelProductBtn.addEventListener("click", () => {
      addProductModal.classList.add("hidden");
      productForm.reset();
      imagePreview.innerHTML = "";
    });

    addProductModal.addEventListener("click", (e) => {
      if (e.target === addProductModal) {
        addProductModal.classList.add("hidden");
        productForm.reset();
        imagePreview.innerHTML = "";
      }
    });

    // Edit Modal
    document.getElementById("cancelEdit").addEventListener("click", () => {
      document.getElementById("editModal").classList.add("hidden");
    });

    document.getElementById("saveEditBtn").addEventListener("click", handleEditProduct);

    // Filter buttons
    document.getElementById("filterAll").addEventListener("click", () => filterProducts('all'));
    document.getElementById("filterInStock").addEventListener("click", () => filterProducts('in-stock'));
    document.getElementById("filterLowStock").addEventListener("click", () => filterProducts('low-stock'));
    document.getElementById("filterOutOfStock").addEventListener("click", () => filterProducts('out-of-stock'));
    
    // Search and category filter
    document.getElementById("searchInput").addEventListener("input", handleSearch);
    document.getElementById("categoryFilter").addEventListener("change", handleCategoryFilter);
  }

  // Dashboard functions
  async function loadDashboard() {
    await loadProducts();
    initSalesChart();
  }

  // PRODUCTS SECTION - UPDATED WITH PROPER ERROR HANDLING
  async function loadProducts() {
    try {
      showLoadingState();
      
      console.log("üì¶ Fetching products from:", `${API_BASE_URL}/api/products`);
      const res = await fetch(`${API_BASE_URL}/api/products`);
      
      console.log("üì® Response status:", res.status);
      
      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`);
      }
      
      allProducts = await res.json();
      console.log("‚úÖ Products loaded successfully:", allProducts.length);
      renderProductsTable(allProducts);
      
    } catch (err) {
      console.error("‚ùå Error loading products:", err);
      showNotification("‚ùå Error loading products: " + err.message, "error");
      showErrorState();
    }
  }

  function showLoadingState() {
    const productsTableBody = document.getElementById("productsTableBody");
    productsTableBody.innerHTML = `
      <tr>
        <td colspan="6" class="px-6 py-12 text-center">
          <i class="fas fa-spinner fa-spin text-3xl text-primary mb-3"></i>
          <p class="text-gray-600">Loading products...</p>
        </td>
      </tr>
    `;
  }

  function showErrorState() {
    const productsTableBody = document.getElementById("productsTableBody");
    productsTableBody.innerHTML = `
      <tr>
        <td colspan="6" class="px-6 py-12 text-center text-gray-500">
          <i class="fas fa-exclamation-triangle text-3xl text-red-500 mb-3"></i>
          <p class="text-lg">Failed to load products</p>
          <p class="text-sm">Please check your connection and try again</p>
          <button onclick="loadProducts()" class="mt-3 bg-primary text-white px-4 py-2 rounded-lg hover:bg-darkRed transition-colors">
            <i class="fas fa-redo mr-2"></i>Retry
          </button>
        </td>
      </tr>
    `;
  }

  function renderProductsTable(products) {
    const productsTableBody = document.getElementById("productsTableBody");
    
    if (!products || products.length === 0) {
      productsTableBody.innerHTML = `
        <tr>
          <td colspan="6" class="px-6 py-12 text-center text-gray-500">
            <i class="fas fa-tshirt text-4xl text-gray-300 mb-3"></i>
            <p class="text-lg">No products found</p>
            <p class="text-sm">Add your first product to get started</p>
            <button onclick="document.getElementById('addProductBtn').click()" class="mt-3 bg-primary text-white px-4 py-2 rounded-lg hover:bg-darkRed transition-colors">
              <i class="fas fa-plus mr-2"></i>Add Product
            </button>
          </td>
        </tr>
      `;
      updatePaginationInfo(0);
      return;
    }

    // Calculate pagination
    const startIndex = (currentPage - 1) * productsPerPage;
    const endIndex = startIndex + productsPerPage;
    const paginatedProducts = products.slice(startIndex, endIndex);

    productsTableBody.innerHTML = paginatedProducts.map((product, index) => {
      const actualIndex = startIndex + index;
      
      // Determine stock status
      let stockClass = "stock-high";
      let stockStatus = "In Stock";
      let statusClass = "bg-green-100 text-green-800";
      
      if (product.stock === 0) {
        stockClass = "stock-low";
        stockStatus = "Out of Stock";
        statusClass = "bg-red-100 text-red-800";
      } else if (product.stock <= 10) {
        stockClass = "stock-medium";
        stockStatus = "Low Stock";
        statusClass = "bg-yellow-100 text-yellow-800";
      }

      // Handle image URLs properly
      let imageHtml = '';
      if (product.images && product.images.length > 0) {
        const imagePath = product.images[0].replace(/\\/g, "/");
        const cleanPath = imagePath.startsWith('/') ? imagePath.slice(1) : imagePath;
        const imageUrl = `${API_BASE_URL}/${cleanPath}`;
        
        imageHtml = `
          <img src="${imageUrl}" alt="${product.name}" 
               class="w-full h-full object-cover" 
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="w-full h-full hidden items-center justify-center bg-primary/10">
            <i class="fas fa-tshirt text-primary text-lg"></i>
          </div>
        `;
      } else {
        imageHtml = `
          <div class="w-full h-full flex items-center justify-center bg-primary/10">
            <i class="fas fa-tshirt text-primary text-lg"></i>
          </div>
        `;
      }

      return `
        <tr class="table-row">
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div class="w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl mr-4 flex items-center justify-center product-image overflow-hidden">
                ${imageHtml}
              </div>
              <div>
                <div class="text-sm font-semibold text-gray-900">${product.name || 'Unnamed Product'}</div>
                <div class="text-sm text-gray-500">SKU: ${(product.category || '').substring(0, 2).toUpperCase()}-${(product._id || '').slice(-4)}</div>
              </div>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-primary/10 text-primary">
              ${product.category || 'Uncategorized'}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900">
            ‚Çπ${(product.price || 0).toLocaleString()}
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="status-badge ${stockClass}">
              ${product.stock || 0} units
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="status-badge ${statusClass}">
              ${stockStatus}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button class="text-primary hover:text-primaryLight mr-4 edit-product" data-id="${product._id}" data-index="${actualIndex}">
              <i class="fas fa-edit mr-1"></i>Edit
            </button>
            <button class="text-red-600 hover:text-red-800 delete-product" data-id="${product._id}">
              <i class="fas fa-trash mr-1"></i>Delete
            </button>
          </td>
        </tr>
      `;
    }).join("");

    // Add event listeners to action buttons
    addProductActionListeners();
    
    // Update pagination
    updatePaginationInfo(products.length);
    renderPagination(products.length);
  }

  function addProductActionListeners() {
    // DELETE PRODUCT
    document.querySelectorAll(".delete-product").forEach((btn) => {
      btn.addEventListener("click", async function () {
        const id = this.dataset.id;
        const productName = this.closest('tr').querySelector('.font-semibold').textContent;
        
        if (confirm(`Are you sure you want to delete "${productName}"? This action cannot be undone.`)) {
          try {
            console.log("üóëÔ∏è Deleting product:", id);
            const res = await fetch(`${API_BASE_URL}/api/products/${id}`, { 
              method: "DELETE" 
            });
            
            if (res.ok) {
              showNotification("‚úÖ Product deleted successfully!", "success");
              await loadProducts(); // Reload the products
            } else {
              const error = await res.json();
              throw new Error(error.message || "Failed to delete product");
            }
          } catch (err) {
            console.error("Delete error:", err);
            showNotification("‚ùå Error deleting product: " + err.message, "error");
          }
        }
      });
    });

    // EDIT PRODUCT
    document.querySelectorAll(".edit-product").forEach((btn) => {
      btn.addEventListener("click", function () {
        const id = this.dataset.id;
        const index = parseInt(this.dataset.index);
        const product = allProducts[index];
        
        if (product) {
          openEditModal(product);
        }
      });
    });
  }

  function openEditModal(product) {
    document.getElementById("editProductId").value = product._id;
    document.getElementById("editName").value = product.name || '';
    document.getElementById("editPrice").value = product.price || '';
    document.getElementById("editCategory").value = product.category || '';
    document.getElementById("editStock").value = product.stock || '';
    document.getElementById("editDescription").value = product.description || '';

    document.getElementById("editModal").classList.remove("hidden");
  }

  async function handleEditProduct() {
    const saveBtn = document.getElementById("saveEditBtn");
    const originalText = saveBtn.innerHTML;
    
    try {
      saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Saving...';
      saveBtn.disabled = true;

      const id = document.getElementById("editProductId").value;
      const updateData = {
        name: document.getElementById("editName").value,
        price: parseFloat(document.getElementById("editPrice").value),
        category: document.getElementById("editCategory").value,
        stock: parseInt(document.getElementById("editStock").value),
        description: document.getElementById("editDescription").value
      };

      // Validate data
      if (!updateData.name || !updateData.category || updateData.price < 0 || updateData.stock < 0) {
        throw new Error("Please fill all required fields with valid values");
      }

      console.log("‚úèÔ∏è Updating product:", id, updateData);
      const res = await fetch(`${API_BASE_URL}/api/products/${id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(updateData)
      });

      const result = await res.json();

      if (!res.ok) {
        throw new Error(result.error || result.message || "Failed to update product");
      }

      showNotification("‚úÖ Product updated successfully!", "success");
      document.getElementById("editModal").classList.add("hidden");
      await loadProducts(); // Reload to show updated data
      
    } catch (error) {
      console.error("Update error:", error);
      showNotification("‚ùå Error updating product: " + error.message, "error");
    } finally {
      saveBtn.innerHTML = 'Save Changes';
      saveBtn.disabled = false;
    }
  }

  // Add Product Form Submission
  productForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const saveBtn = document.getElementById("saveProductBtn");
    const originalText = saveBtn.innerHTML;
    
    try {
      saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Adding...';
      saveBtn.disabled = true;

      const formData = new FormData(productForm);
      
      // Validate required fields
      const name = formData.get('name');
      const category = formData.get('category');
      const price = formData.get('price');
      const stock = formData.get('stock');
      const images = formData.getAll('images');

      if (!name || !category || !price || !stock) {
        throw new Error("Please fill all required fields");
      }

      if (images.length === 0) {
        throw new Error("Please upload at least one product image");
      }

      console.log("‚ûï Adding new product...");
      const res = await fetch(`${API_BASE_URL}/api/products`, {
        method: "POST",
        body: formData,
      });

      const result = await res.json();

      if (!res.ok) {
        throw new Error(result.error || result.message || "Failed to add product");
      }

      showNotification("‚úÖ Product added successfully!", "success");
      document.getElementById("addProductModal").classList.add("hidden");
      productForm.reset();
      imagePreview.innerHTML = "";
      await loadProducts(); // Reload products to show the new one

    } catch (err) {
      console.error("Add product error:", err);
      showNotification("‚ùå Error: " + err.message, "error");
    } finally {
      saveBtn.innerHTML = '<i class="fas fa-plus mr-2"></i> Add Product';
      saveBtn.disabled = false;
    }
  });

  // Filtering and Search Functions
  function filterProducts(filterType) {
    let filteredProducts = [...allProducts];
    
    switch (filterType) {
      case 'in-stock':
        filteredProducts = allProducts.filter(p => p.stock > 10);
        break;
      case 'low-stock':
        filteredProducts = allProducts.filter(p => p.stock > 0 && p.stock <= 10);
        break;
      case 'out-of-stock':
        filteredProducts = allProducts.filter(p => p.stock === 0);
        break;
      case 'all':
      default:
        filteredProducts = allProducts;
        break;
    }
    
    // Apply category filter
    const categoryFilter = document.getElementById("categoryFilter").value;
    if (categoryFilter) {
      filteredProducts = filteredProducts.filter(p => p.category === categoryFilter);
    }
    
    // Apply search filter
    const searchTerm = document.getElementById("searchInput").value.toLowerCase();
    if (searchTerm) {
      filteredProducts = filteredProducts.filter(p => 
        p.name.toLowerCase().includes(searchTerm) || 
        (p.category && p.category.toLowerCase().includes(searchTerm))
      );
    }
    
    currentPage = 1;
    renderProductsTable(filteredProducts);
  }

  function handleSearch() {
    filterProducts('all');
  }

  function handleCategoryFilter() {
    filterProducts('all');
  }

  // Pagination Functions
  function updatePaginationInfo(totalProducts) {
    const start = Math.min((currentPage - 1) * productsPerPage + 1, totalProducts);
    const end = Math.min(currentPage * productsPerPage, totalProducts);
    
    document.getElementById("productsStart").textContent = totalProducts === 0 ? 0 : start;
    document.getElementById("productsEnd").textContent = end;
    document.getElementById("productsTotal").textContent = totalProducts;
  }

  function renderPagination(totalProducts) {
    const totalPages = Math.ceil(totalProducts / productsPerPage);
    const paginationContainer = document.getElementById("paginationContainer");
    
    if (totalPages <= 1) {
      paginationContainer.innerHTML = '';
      return;
    }

    let paginationHTML = '';
    
    // Previous button
    paginationHTML += `
      <button class="px-4 py-2 border border-gray-300 rounded-xl text-sm font-medium hover:bg-gray-50 transition-colors ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}" 
        ${currentPage === 1 ? 'disabled' : ''} onclick="changePage(${currentPage - 1})">
        Previous
      </button>
    `;

    // Page numbers
    for (let i = 1; i <= totalPages; i++) {
      if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
        paginationHTML += `
          <button class="px-4 py-2 ${currentPage === i ? 'bg-primary text-white' : 'border border-gray-300 text-gray-700'} rounded-xl text-sm font-medium hover:bg-gray-50 transition-colors" 
            onclick="changePage(${i})">
            ${i}
          </button>
        `;
      } else if (i === currentPage - 2 || i === currentPage + 2) {
        paginationHTML += `<span class="px-2 py-2 text-gray-500">...</span>`;
      }
    }

    // Next button
    paginationHTML += `
      <button class="px-4 py-2 border border-gray-300 rounded-xl text-sm font-medium hover:bg-gray-50 transition-colors ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}" 
        ${currentPage === totalPages ? 'disabled' : ''} onclick="changePage(${currentPage + 1})">
        Next
      </button>
    `;

    paginationContainer.innerHTML = paginationHTML;
  }

  function changePage(page) {
    currentPage = page;
    filterProducts('all'); // This will re-render with the new page
  }

  // Other dashboard functions
  function initSalesChart() {
    const ctx = document.getElementById("salesChart")?.getContext("2d");
    if (!ctx) return;

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [{
          label: 'Sales (‚Çπ)',
          data: [120000, 190000, 150000, 180000, 220000, 250000, 280000, 300000, 270000, 320000, 350000, 400000],
          borderColor: '#800000',
          backgroundColor: 'rgba(128, 0, 0, 0.1)',
          borderWidth: 3,
          fill: true,
          tension: 0.4,
          pointBackgroundColor: '#800000',
          pointBorderColor: '#ffffff',
          pointBorderWidth: 2,
          pointRadius: 6,
          pointHoverRadius: 8
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: function(value) {
                return '‚Çπ' + (value / 1000) + 'k';
              }
            },
            grid: {
              color: 'rgba(0, 0, 0, 0.1)'
            }
          },
          x: {
            grid: {
              color: 'rgba(0, 0, 0, 0.1)'
            }
          }
        }
      }
    });
  }

  // Notification function
  function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotifications = document.querySelectorAll('.custom-notification');
    existingNotifications.forEach(notification => notification.remove());

    const notification = document.createElement('div');
    notification.className = `custom-notification fixed top-4 right-4 px-6 py-4 rounded-xl shadow-lg z-50 transform transition-all duration-300 ${
      type === 'success' ? 'bg-green-500 text-white' :
      type === 'error' ? 'bg-red-500 text-white' :
      'bg-blue-500 text-white'
    }`;
    
    notification.innerHTML = `
      <div class="flex items-center">
        <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : 'info'}-circle mr-3 text-lg"></i>
        <span class="font-semibold">${message}</span>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
      notification.style.opacity = '0';
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => notification.remove(), 300);
    }, 5000);
  }

  console.log("‚úÖ Admin Dashboard JavaScript loaded successfully");
</script>
  </body>
</html>
